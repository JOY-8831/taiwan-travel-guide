import{_ as C}from"./CAQH29Vi.js";import{_ as T}from"./Btsozv48.js";import{d as w,r as a,o as B,z as f,D as _,B as t,N as E,H as b,O as g,P as y,G as D,A as k,_ as O}from"./Dhb-oGz8.js";import{u as j}from"./DfxfsO8D.js";import{t as A}from"./DdGQAvxv.js";const F={id:"email-page",class:"page-layout"},M={class:"frame"},P={class:"form-section"},V={class:"input-group"},I={class:"input-group"},H={class:"button-container"},G={key:0,class:"success-overlay"},J={class:"success-card"},L=w({__name:"email",setup(U){const m=D(),{getMustSeeList:x,getMustEatList:N,loadData:S,favoriteIds:p}=j(),l=a(""),n=a(""),i=a(!1),v=a(!1),r=a({tours:"",spots:"",food:""});B(async()=>{await S();const o=localStorage.getItem("selectedTours");let e=[];if(o){const s=JSON.parse(o);e=A.filter(c=>s.includes(c.id)).map(c=>c.title)}const u=x.value.filter(s=>p.value.includes(s.Code)).map(s=>s.Name_EN||s.Name_CH),d=N.value.filter(s=>p.value.includes(s.Code)).map(s=>s.Name_EN||s.Name_CH);r.value={tours:e.join(", "),spots:u.join(", "),food:d.join(", ")}});const h=async()=>{if(!l.value&&!n.value){alert("Please enter your email or feedback!");return}i.value=!0;const o="https://script.google.com/macros/s/AKfycbyyj1I90GMZ8n6EXvTo6c9J7_6ECZSOfWNrKV3AOu6DaNckLg93s-txliMYmWA99Aw1/exec";try{const e=await fetch(o,{method:"POST",mode:"no-cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify({email:l.value,feedback:n.value,tours:r.value.tours,spots:r.value.spots,food:r.value.food})});v.value=!0}catch(e){console.error("Error submitting form:",e),alert("Something went wrong. Please try again later.")}finally{i.value=!1}};return(o,e)=>{const u=C,d=T;return k(),f("div",F,[_(u,{onClick:e[0]||(e[0]=s=>b(m).push("/end"))}),t("main",M,[e[7]||(e[7]=t("header",{class:"header-section"},[t("h1",{class:"title"},"ðŸ’Œ Stay in Touch"),t("p",{class:"subtitle"},"Get a custom PDF guide and help us improve!")],-1)),t("section",P,[t("div",V,[e[4]||(e[4]=t("label",{for:"email",class:"input-label"},"Your Email Address",-1)),g(t("input",{id:"email","onUpdate:modelValue":e[1]||(e[1]=s=>l.value=s),type:"email",placeholder:"example@email.com",class:"custom-input"},null,512),[[y,l.value]])]),t("div",I,[e[5]||(e[5]=t("label",{for:"feedback",class:"input-label"},"Suggestions or Feedback",-1)),g(t("textarea",{id:"feedback","onUpdate:modelValue":e[2]||(e[2]=s=>n.value=s),placeholder:"Tell us what you think about this trip planner...",class:"custom-textarea"},null,512),[[y,n.value]])]),e[6]||(e[6]=t("div",{class:"promo-box"},[t("p",{class:"promo-text"}," ðŸŒŸ **Bonus:** If you leave your email, we'll send you a **free PDF travel guide** including detailed maps and exclusive tips! ")],-1))]),t("div",H,[_(d,{text:i.value?"Sending...":"Submit & Finish",type:"ok",disabled:i.value,onClick:h},null,8,["text","disabled"])])]),v.value?(k(),f("div",G,[t("div",J,[e[8]||(e[8]=t("h2",null,"Thanks for playing!",-1)),e[9]||(e[9]=t("p",null,"Your journey is just beginning. See you in Taiwan!",-1)),t("button",{class:"home-btn",onClick:e[3]||(e[3]=s=>b(m).push("/"))},"Back to Home")])])):E("",!0)])}}}),z=O(L,[["__scopeId","data-v-3872a325"]]);export{z as default};
