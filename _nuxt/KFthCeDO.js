import{_ as g}from"./CAQH29Vi.js";import{_ as y}from"./B5EGpYsz.js";import{_ as h}from"./BfJ4HPBO.js";import{_ as v}from"./CO0W4Z3E.js";import{d as k,y as x,r as B,o as C,e as E,z as _,D as s,B as o,E as T,H as w,I as M,A as d,J as b,K as L,L as I,C as N,q as z,_ as S}from"./Dhb-oGz8.js";import{w as A}from"./DdGQAvxv.js";const F={id:"map_page",class:"page-layout bg-start"},H={class:"frame"},O={class:"map-container-wrapper"},R={class:"map-legend"},V={class:"legend-text"},D={class:"options"},J=k({__name:"map",setup(Z){x({link:[{rel:"stylesheet",href:"https://unpkg.com/leaflet@1.9.4/dist/leaflet.css",integrity:"sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=",crossorigin:""}],script:[{src:"https://unpkg.com/leaflet@1.9.4/dist/leaflet.js",integrity:"sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=",crossorigin:"",tagPosition:"bodyClose"}]});const i={Indigenous:"#A855F7",Discovery:"#3B82F6",Qing:"#10B981",Japanese:"#F59E0B",Modern:"#EF4444"},a=B(null);let n=null;const l=async()=>{if(await M(),!a.value){console.error("Map element not found");return}const e=window.L;if(!e){setTimeout(l,500);return}try{n=e.map(a.value).setView([23.8,121],7),e.tileLayer("https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png",{attribution:"&copy; OpenStreetMap contributors &copy; CARTO"}).addTo(n),A.forEach(t=>{if(t.Lat&&t.Lng){const r=i[t.Era]||"#ccc";e.circleMarker([t.Lat,t.Lng],{radius:8,fillColor:r,color:"#fff",weight:2,opacity:1,fillOpacity:.8}).addTo(n).bindPopup(`
          <div style="font-family: 'Inter', sans-serif; min-width: 120px;">
            <h4 style="margin: 0 0 5px 0; color: #333;">${t.Name_CH}</h4>
            <p style="margin: 0; font-size: 0.8rem; color: #666;">
              <strong>Era:</strong> ${t.Era}<br>
              <strong>Year:</strong> ${t.Year}
            </p>
          </div>
        `)}}),setTimeout(()=>{n.invalidateSize()},200)}catch(t){console.error("Error initializing map:",t)}};return C(()=>{l()}),E(()=>{n&&n.remove()}),(e,t)=>{const r=g,c=y,u=h,f=v;return d(),_("div",F,[s(r),o("main",H,[s(c,{title:"ðŸ—ºï¸ Taiwan Attraction Map",description:"Explore all the must-see and must-eat spots across the island."}),o("div",O,[s(u,null,{default:T(()=>[o("div",{ref_key:"mapElement",ref:a,class:"map-instance"},null,512),o("div",R,[(d(),_(b,null,L(i,(p,m)=>o("div",{key:m,class:"legend-item"},[o("span",{class:"color-dot",style:I({backgroundColor:p})},null,4),o("span",V,N(m),1)])),64))])]),_:1})]),o("section",D,[s(f,{text:"â€º Back to Menu",onClick:t[0]||(t[0]=p=>("navigateTo"in e?e.navigateTo:w(z))("/menu"))})])])])}}}),G=S(J,[["__scopeId","data-v-c7204e26"]]);export{G as default};
