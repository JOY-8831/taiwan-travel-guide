import{_ as k}from"./CAQH29Vi.js";import{_ as w}from"./BTxh1Rga.js";import{d as T,n as I,r as m,o as B,q as u,k as p,z as i,D as _,E as y,T as x,A as c,N as C,B as e,C as l,L,J as $,K as M,H as N,U as A,_ as D}from"./Dhb-oGz8.js";import{w as R}from"./DdGQAvxv.js";const j={class:"page-layout"},P={class:"progress-bar"},V={class:"step-text"},U={class:"progress-line"},W={class:"page-header"},z={class:"pixel-title"},F={class:"points-grid"},J=["onClick"],q={class:"card-image-wrapper"},H=["src","alt"],K={class:"card-info"},O={class:"point-name"},Y={class:"city-tag"},G={class:"nav-footer"},Q={class:"modal-content"},X=["src"],Z={class:"modal-body"},ee={class:"modal-title"},se={class:"modal-city"},te={class:"modal-details"},ae=T({__name:"points",setup(oe){const g=I().app.baseURL,n=m([]),r=m(0),o=m(null);B(()=>{const t=localStorage.getItem("userTravelStyles");if(t)try{const s=JSON.parse(t);Array.isArray(s)&&s.length>0?n.value=s:u("/travel-style")}catch{u("/travel-style")}else u("/travel-style")});const S=p(()=>{const t=n.value[r.value];return t&&{C:"City Explorer",N:"Nature Adventurer",M:"Museums Enthusiast",R:"Relaxation Stroller"}[t]||"Taiwan"}),b=p(()=>{const t=n.value[r.value];return t?R.filter(s=>{const d=s.Code.split("-"),v=d[0]==="P",a=d.slice(1).includes(t);return v&&a}):[]}),h=p(()=>r.value>=n.value.length-1),E=()=>{h.value?(localStorage.removeItem("userTravelStyles"),u("/")):(r.value++,o.value=null,window.scrollTo({top:0,behavior:"smooth"}))},f=t=>{const s=t.target;s.src.endsWith(".jpg")?s.src=s.src.replace(".jpg",".png"):s.src.endsWith(".png")&&(s.src="https://placehold.co/400x300?text=No+Image")};return(t,s)=>{const d=k,v=w;return c(),i("div",j,[_(d),_(x,{name:"page-slide",mode:"out-in"},{default:y(()=>[n.value.length>0?(c(),i("main",{key:r.value,class:"frame"},[e("div",P,[e("span",V,"STYLE "+l(r.value+1)+" / "+l(n.value.length),1),e("div",U,[e("div",{class:"fill",style:L({width:(r.value+1)/n.value.length*100+"%"})},null,4)])]),e("header",W,[e("h1",z,"ðŸ“ "+l(S.value),1),s[2]||(s[2]=e("p",{class:"subtitle"},"Discovering spots that match your vibe.",-1))]),e("section",F,[(c(!0),i($,null,M(b.value,a=>(c(),i("div",{key:a.Code,class:"point-card",onClick:ne=>o.value=a},[e("div",q,[e("img",{src:`${N(g)}images/${a.Code}.jpg`,alt:a.Name_EN,class:"card-img",onError:f},null,40,H),s[3]||(s[3]=e("div",{class:"card-overlay"},[e("span",{class:"view-more"},"VIEW DETAILS")],-1))]),e("div",K,[e("h3",O,l(a.Name_EN),1),e("span",Y,l(a.City||"Taiwan"),1)])],8,J))),128))]),e("div",G,[_(v,{text:h.value?"Finish":"Next Style â€º",type:"next",onClick:E},null,8,["text"])])])):C("",!0)]),_:1}),_(x,{name:"fade"},{default:y(()=>[o.value?(c(),i("div",{key:0,class:"modal-overlay",onClick:s[1]||(s[1]=A(a=>o.value=null,["self"]))},[e("div",Q,[e("button",{class:"close-btn",onClick:s[0]||(s[0]=a=>o.value=null)},"Ã—"),e("img",{src:`${N(g)}images/${o.value.Code}.jpg`,class:"modal-img",onError:f},null,40,X),e("div",Z,[e("h2",ee,l(o.value.Name_EN),1),e("p",se,l(o.value.City),1),s[4]||(s[4]=e("div",{class:"pixel-divider"},null,-1)),e("p",te,l(o.value.Details),1)])])])):C("",!0)]),_:1})])}}}),ue=D(ae,[["__scopeId","data-v-62bbb32b"]]);export{ue as default};
