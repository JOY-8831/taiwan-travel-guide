import{_ as N}from"./CAQH29Vi.js";import{_ as E}from"./BfJ4HPBO.js";import{d as G,r as w,k as _,o as I,V as R,W as Y,M as B,A as g,E as O,B as n,U as V,L,C as D,R as W,I as P,_ as z,z as M,D as b,N as X,J as q,K as F,H,q as U}from"./Dhb-oGz8.js";import{_ as j}from"./B5EGpYsz.js";import{_ as A}from"./CKuTfxd_.js";import{_ as J}from"./BTxh1Rga.js";import{u as K}from"./DfxfsO8D.js";import"./Btsozv48.js";import"./DdGQAvxv.js";const Q={class:"guide-content"},Z={class:"guide-text"},tt=G({__name:"OnboardingGuide",props:{steps:{}},emits:["complete"],setup(T,{emit:y}){const c=T,p=y,a=w(0),i=w(null),h=w(null),f=_(()=>c.steps?.[a.value]?.text||""),o=()=>{const s=c.steps?.[a.value];if(!s)return;const t=document.querySelector(s.target);if(t){const e=t.getBoundingClientRect();e.width>0||e.height>0?i.value=e:setTimeout(o,100)}else i.value=null,setTimeout(o,200)},C=()=>{a.value<c.steps.length-1?a.value++:p("complete")};I(()=>{o(),window.addEventListener("resize",o),window.addEventListener("scroll",o)}),R(()=>{window.removeEventListener("resize",o),window.removeEventListener("scroll",o)}),Y(a,()=>{P(o)});const k=_(()=>{if(!i.value)return{backgroundColor:"rgba(0,0,0,0.7)"};const{top:s,left:t,width:e,height:r}=i.value,m=t+e/2,u=s+r/2,l=Math.max(e,r)/1.5;return{backgroundColor:"transparent",backgroundImage:`radial-gradient(circle at ${m}px ${u}px, transparent ${l}px, rgba(0,0,0,0.7) ${l+5}px)`}}),x=_(()=>{const t=c.steps?.[a.value]?.position||"bottom";if(!i.value||t==="center")return{top:"50%",left:"50%",transform:"translate(-50%, -50%)",position:"fixed"};const{top:e,left:r,width:m,height:u}=i.value;let l=0,d=0,v="";return t==="bottom"?(l=e+u+20,d=r+m/2,v="translateX(-50%)"):t==="top"?(l=e-180,d=r+m/2,v="translateX(-50%)"):t==="right"?(l=e+u/2,d=r+m+20,v="translateY(-50%)"):t==="left"&&(l=e+u/2,d=r-280,v="translateY(-50%)"),(t==="top"||t==="bottom")&&(d=Math.max(140,Math.min(window.innerWidth-140,d))),{top:`${l}px`,left:`${d}px`,transform:v,position:"fixed"}}),S=_(()=>c.steps[a.value]?.position||"bottom"),$=_(()=>{const s=c.steps[a.value]?.position||"bottom";if(!i.value||!h.value||s==="center")return{display:"none"};const{top:t,left:e,width:r,height:m}=i.value;if(s==="top"||s==="bottom"){const u=parseInt(x.value.left||"0");return{left:`calc(50% + ${e+r/2-u}px)`,display:"block"}}else{if(s==="right")return{left:"-14px",top:"50%",transform:"translateY(-50%) rotate(90deg)",display:"block"};if(s==="left")return{right:"-14px",top:"50%",transform:"translateY(-50%) rotate(-90deg)",display:"block"}}return{display:"none"}});return(s,t)=>{const e=E;return g(),B(e,null,{default:O(()=>[n("div",{class:"onboarding-container",onClick:t[0]||(t[0]=V(()=>{},["stop"]))},[n("div",{class:"onboarding-overlay",style:L(k.value)},null,4),n("div",{ref_key:"boxRef",ref:h,class:"guide-box",style:L(x.value)},[n("div",Q,[n("p",Z,D(f.value),1)]),n("div",{class:"guide-footer"},[n("button",{class:"custom-got-it",onClick:C},"Got it!")]),n("div",{class:W(["guide-arrow",S.value]),style:L($.value)},null,6)],4)])]),_:1})}}}),et=Object.assign(z(tt,[["__scopeId","data-v-6581db7e"]]),{__name:"OnboardingGuide"}),ot={id:"must_see",class:"page-layout"},st={id:"see_list"},nt={class:"wishcard-grid"},at=G({__name:"must-see",setup(T){const{getMustSeeList:y,loadData:c}=K(),p=w(!1),a=[{text:"Wish cards can be expanded to see more details.",target:"#first-wish-card",position:"center"},{text:"Click the heart button to save your favorites for later!",target:"#first-wish-card .heart-btn",position:"bottom"}],i=_(()=>(y.value||[]).filter(o=>o.Code&&o.Code.startsWith("P-E-")));I(async()=>{await c(),p.value=!0});const h=()=>{p.value=!1,localStorage.setItem("onboarding_must_see_done","true")};return(f,o)=>{const C=N,k=et,x=j,S=A,$=J,s=E;return g(),M("div",ot,[b(C),b(s,null,{default:O(()=>[p.value?(g(),B(k,{key:0,steps:a,onComplete:h})):X("",!0),n("main",{class:W(["frame",{"is-locked":p.value}])},[b(x,{title:"Places you must go in Taiwan!",description:"Here are 4 must-visit places in Taiwan. Simply search them on Google Maps to find the nearest locations. We’ve also highlighted some of the most famous ones for you",note:"✦ Click the cards to view details ✦"}),n("section",st,[n("div",nt,[(g(!0),M(q,null,F(i.value,(t,e)=>(g(),B(S,{id:e===0?"first-wish-card":void 0,key:t.Code,item:t,"show-c-h":!1},null,8,["id","item"]))),128))])]),b($,{text:"Let's get more specific >",type:"next",onClick:o[0]||(o[0]=t=>("navigateTo"in f?f.navigateTo:H(U))("/travel-style"))})],2)]),_:1})])}}}),ft=z(at,[["__scopeId","data-v-7a31a78e"]]);export{ft as default};
